"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[137],{4137:(w,h,n)=>{n.r(h),n.d(h,{AuthComponent:()=>J});var m=n(6895),t=n(4650),r=n(4006),l=n(4859),f=n(6709),d=n(3238),v=n(9602),p=n(9549),c=n(7392),g=n(4144),A=n(1948);function T(i,a){1&i&&(t.TgZ(0,"mat-error"),t._uU(1," Enter your name "),t.qZA())}let F=(()=>{class i{constructor(e){this.fb=e,this.onSignin=new t.vpe,this.hide=!0,this.authForm=this.fb.group({username:["",[r.kI.required]],password:["",[r.kI.required,r.kI.minLength(8),r.kI.maxLength(15)]]})}submitForm(){this.onSignin.emit(this.authForm.value)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(r.qu))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-form-auth"]],outputs:{onSignin:"onSignin"},standalone:!0,features:[t.jDz],decls:16,vars:5,consts:[[1,"user-form",3,"formGroup","ngSubmit"],["appearance","outline"],["matInput","","autocomplete","off","formControlName","username"],["username",""],[4,"ngIf"],["matInput","","autocomplete","off","formControlName","password",3,"type"],["password",""],["matSuffix","",3,"click"],["mat-raised-button","","cdkFocusInitial","","type","submit","color","primary",1,"btn-gold",3,"disabled"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t.NdJ("ngSubmit",function(){return o.submitForm()}),t.TgZ(1,"mat-form-field",1)(2,"mat-label"),t._uU(3,"Name"),t.qZA(),t._UZ(4,"input",2,3),t.YNc(6,T,2,0,"mat-error",4),t.qZA(),t.TgZ(7,"mat-form-field",1)(8,"mat-label"),t._uU(9,"Password"),t.qZA(),t._UZ(10,"input",5,6),t.TgZ(12,"mat-icon",7),t.NdJ("click",function(){return o.hide=!o.hide}),t._uU(13),t.qZA()(),t.TgZ(14,"button",8),t._uU(15," Sign in "),t.qZA()()),2&e&&(t.Q6J("formGroup",o.authForm),t.xp6(6),t.Q6J("ngIf",o.authForm.controls.username.invalid),t.xp6(4),t.Q6J("type",o.hide?"password":"text"),t.xp6(3),t.Oqu(o.hide?"visibility":"visibility_off"),t.xp6(1),t.Q6J("disabled",o.authForm.invalid))},dependencies:[m.ez,m.O5,r.UX,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u,p.lN,p.KE,p.hX,p.TO,p.R9,g.c,g.Nt,c.Ps,c.Hw,l.ot,l.lW,A.Fk,f.p9,r.u5,v.FA,d.XK]}),i})(),Z=(()=>{class i{constructor(){this.onSignin=new t.vpe,this.onGoToAboutPage=new t.vpe,this.onGoToOppositeForm=new t.vpe,this.titleLink="Sign up",this.instruction="Do not have an account?"}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-auth-view"]],inputs:{currentUser:"currentUser"},outputs:{onSignin:"onSignin",onGoToAboutPage:"onGoToAboutPage",onGoToOppositeForm:"onGoToOppositeForm"},standalone:!0,features:[t.jDz],decls:14,vars:2,consts:[[1,"page-dark"],[1,"main-container"],[1,"page","register-page"],[1,"big-logo"],[1,"title"],[1,"instruction"],[1,"btn-link",3,"click"],[3,"onSignin"],["mat-raised-button","","color","primary",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t._UZ(3,"div",3),t.TgZ(4,"div",4),t._uU(5,"The place for your healthy sleep"),t.qZA(),t.TgZ(6,"div",5)(7,"span",5),t._uU(8),t.qZA(),t.TgZ(9,"span",6),t.NdJ("click",function(){return o.onGoToOppositeForm.emit()}),t._uU(10),t.qZA()(),t.TgZ(11,"app-form-auth",7),t.NdJ("onSignin",function(u){return o.onSignin.emit(u)}),t.qZA(),t.TgZ(12,"button",8),t.NdJ("click",function(){return o.onGoToAboutPage.emit()}),t._uU(13," About "),t.qZA()()()()),2&e&&(t.xp6(8),t.Oqu(o.instruction),t.xp6(2),t.Oqu(o.titleLink))},dependencies:[m.ez,F,l.ot,l.lW],styles:["button[_ngcontent-%COMP%]{margin-top:10px}"]}),i})();var C=n(8505),S=n(262),b=n(2843),U=n(9299),G=n(570),y=n(5625),O=n(8339);let J=(()=>{class i{constructor(e,o,s,u){this.router=e,this.auth=o,this.message=s,this.loadingService=u,this.auth.user.value&&this.goToApp()}onSignin(e){const o=this.auth.signIn(e).pipe((0,C.b)(()=>{this.message.shomMessage("Welcome to app!")}),(0,S.K)(s=>(this.message.shomMessage("The authorisation is cancelled"),(0,b._)(()=>s))));this.currentUser$=this.loadingService.showSpinnerUntilCompleted(o)}goToApp(){this.router.navigate(["/sleep"])}onGoToOppositeForm(){this.router.navigate(["/signup"])}onGoToAboutPage(){this.router.navigate(["/about"])}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(U.F0),t.Y36(G.e),t.Y36(y.K),t.Y36(O.b))},i.\u0275cmp=t.Xpm({type:i,selectors:[["app-auth"]],standalone:!0,features:[t.jDz],decls:2,vars:3,consts:[[3,"currentUser","onSignin","onGoToAboutPage","onGoToOppositeForm"]],template:function(e,o){1&e&&(t.TgZ(0,"app-auth-view",0),t.NdJ("onSignin",function(u){return o.onSignin(u)})("onGoToAboutPage",function(){return o.onGoToAboutPage()})("onGoToOppositeForm",function(){return o.onGoToOppositeForm()}),t.ALo(1,"async"),t.qZA()),2&e&&t.Q6J("currentUser",t.lcZ(1,1,o.currentUser$))},dependencies:[m.ez,m.Ov,Z]}),i})()}}]);