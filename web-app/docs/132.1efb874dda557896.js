"use strict";(self.webpackChunkweb_app=self.webpackChunkweb_app||[]).push([[132],{3132:(z,f,r)=>{r.r(f),r.d(f,{RegisterComponent:()=>P});var u=r(6895),e=r(4650),s=r(4006),m=r(9549),h=r(4144),v=r(7392),T=r(4859),c=r(1948),S=r(6709),g=r(9602),C=r(3238);function b(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," 2 - 15 characters "),e.qZA())}function R(n,a){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Enter a valid email "),e.qZA())}let G=(()=>{class n{constructor(t){this.fb=t,this.onSignup=new e.vpe,this.hide=!0,this.registrationForm=this.fb.group({username:["",[s.kI.required,s.kI.minLength(2),s.kI.maxLength(15)]],DOB:[],gender:["female"],email:["",[s.kI.required,s.kI.email]],password:["",[s.kI.required,s.kI.minLength(8),s.kI.maxLength(15)]]})}submitForm(){this.onSignup.emit(this.registrationForm.value)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-form-register"]],outputs:{onSignup:"onSignup"},standalone:!0,features:[e.jDz],decls:43,vars:8,consts:[[1,"user-form",3,"formGroup","ngSubmit"],["appearance","outline",1,"user-form-space"],["matInput","","autocomplete","off","formControlName","username"],["username",""],[4,"ngIf"],["appearance","outline",1,"example-full-width"],["matInput","","formControlName","DOB",3,"matDatepicker"],["DOB",""],["matIconSuffix","",3,"for"],["matDatepickerToggleIcon",""],["picker",""],["formControlName","gender"],["gender",""],["color","primary","value","female"],["color","primary","value","male"],["appearance","outline"],["matInput","","autocomplete","off","formControlName","email"],["email",""],["matInput","","autocomplete","off","formControlName","password",3,"type"],["password",""],["matSuffix","",3,"click"],["mat-raised-button","","cdkFocusInitial","","type","submit","color","primary",1,"btn-gold",3,"disabled"]],template:function(t,o){if(1&t&&(e.TgZ(0,"form",0),e.NdJ("ngSubmit",function(){return o.submitForm()}),e.TgZ(1,"mat-form-field",1)(2,"mat-label"),e._uU(3,"Username"),e.qZA(),e._UZ(4,"input",2,3),e.YNc(6,b,2,0,"mat-error",4),e.qZA(),e.TgZ(7,"mat-form-field",5)(8,"mat-label"),e._uU(9,"Choose a date"),e.qZA(),e._UZ(10,"input",6,7),e.TgZ(12,"mat-hint"),e._uU(13,"MM/DD/YYYY"),e.qZA(),e.TgZ(14,"mat-datepicker-toggle",8)(15,"mat-icon",9),e._uU(16,"keyboard_arrow_down"),e.qZA()(),e._UZ(17,"mat-datepicker",null,10),e.qZA(),e.TgZ(19,"div")(20,"label"),e._uU(21,"Gender:"),e.qZA(),e.TgZ(22,"mat-radio-group",11,12)(24,"mat-radio-button",13),e._uU(25,"Female"),e.qZA(),e.TgZ(26,"mat-radio-button",14),e._uU(27,"Male"),e.qZA()()(),e.TgZ(28,"mat-form-field",15)(29,"mat-label"),e._uU(30,"Email"),e.qZA(),e._UZ(31,"input",16,17),e.YNc(33,R,2,0,"mat-error",4),e.qZA(),e.TgZ(34,"mat-form-field",15)(35,"mat-label"),e._uU(36,"Password"),e.qZA(),e._UZ(37,"input",18,19),e.TgZ(39,"mat-icon",20),e.NdJ("click",function(){return o.hide=!o.hide}),e._uU(40),e.qZA()(),e.TgZ(41,"button",21),e._uU(42," Sign up "),e.qZA()()),2&t){const i=e.MAs(18);e.Q6J("formGroup",o.registrationForm),e.xp6(6),e.Q6J("ngIf",o.registrationForm.controls.username.invalid),e.xp6(4),e.Q6J("matDatepicker",i),e.xp6(4),e.Q6J("for",i),e.xp6(19),e.Q6J("ngIf",o.registrationForm.controls.email.invalid),e.xp6(4),e.Q6J("type",o.hide?"password":"text"),e.xp6(3),e.Oqu(o.hide?"visibility":"visibility_off"),e.xp6(1),e.Q6J("disabled",o.registrationForm.invalid)}},dependencies:[u.ez,u.O5,s.UX,s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,m.lN,m.KE,m.hX,m.bx,m.TO,m.R9,h.c,h.Nt,v.Ps,v.Hw,T.ot,T.lW,c.Fk,c.VQ,c.U0,S.p9,s.u5,g.FA,g.Mq,g.hl,g.nW,g.Q0,C.XK]}),n})(),O=(()=>{class n{constructor(){this.onSignup=new e.vpe,this.onGoToOppositeForm=new e.vpe,this.onGoToAboutPage=new e.vpe,this.titleLink="Sign in",this.instruction="Already have an account?"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register-view"]],inputs:{currentUser:"currentUser"},outputs:{onSignup:"onSignup",onGoToOppositeForm:"onGoToOppositeForm",onGoToAboutPage:"onGoToAboutPage"},standalone:!0,features:[e.jDz],decls:12,vars:2,consts:[[1,"page-dark"],[1,"main-container"],[1,"page","register-page"],[1,"big-logo"],[1,"title",3,"click"],[1,"instruction"],[1,"btn-link",3,"click"],[3,"onSignup"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2),e._UZ(3,"div",3),e.TgZ(4,"div",4),e.NdJ("click",function(){return o.onGoToAboutPage.emit()}),e._uU(5," The place for your healthy sleep "),e.qZA(),e.TgZ(6,"div",5)(7,"span",5),e._uU(8),e.qZA(),e.TgZ(9,"span",6),e.NdJ("click",function(){return o.onGoToOppositeForm.emit()}),e._uU(10),e.qZA()(),e.TgZ(11,"app-form-register",7),e.NdJ("onSignup",function(p){return o.onSignup.emit(p)}),e.qZA()()()()),2&t&&(e.xp6(8),e.Oqu(o.instruction),e.xp6(2),e.Oqu(o.titleLink))},dependencies:[u.ez,G]}),n})();var l=r(8505),y=r(262),I=r(2843),Z=r(9299),k=r(1135),F=r(4004),D=r(3151),J=r(4120),L=r(570),N=r(529),U=r(8339);let w=(()=>{class n{constructor(t,o,i,p,Q){this.storage=t,this.auth=o,this.httpClient=i,this.router=p,this.loadingService=Q,this.api="http://sleeptracker.banksiaglobal.com:9000/",this.user=new k.X(""),this.user$=this.user.asObservable(),this.isLoggedIn$=this.user$.pipe((0,F.U)(d=>!!d)),this.isLoggedOut$=this.isLoggedIn$.pipe((0,F.U)(d=>!d));const A=this.storage.getUser();A&&this.user.next(A)}signUp({user:t}){return this.httpClient.post(this.api+"auth/sign-up",t).pipe((0,l.b)(o=>{this.storage.saveTokens(o.access_token)}),(0,l.b)(()=>this.auth.getCurrentUser().subscribe()),(0,l.b)(()=>this.goToApp()),(0,D.d)())}goToApp(){console.log("go to app"),this.router.navigate(["/sleeps"])}}return n.\u0275fac=function(t){return new(t||n)(e.LFG(J.n),e.LFG(L.e),e.LFG(N.eN),e.LFG(Z.F0),e.LFG(U.b))},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var Y=r(5625);let P=(()=>{class n{constructor(t,o,i,p){this.router=t,this.registre=o,this.message=i,this.loadingService=p}onSignup(t){t.DOB=this.convertDate(new Date(t.DOB));const o=this.registre.signUp({user:t}).pipe((0,l.b)(()=>this.goToApp()),(0,l.b)(()=>{this.message.shomMessage("Welcome to app!")}),(0,y.K)(i=>(this.message.shomMessage("The registration is cancelled"),this.router.navigate(["/signup"]),(0,I._)(()=>i))));this.currentUser$=this.loadingService.showSpinnerUntilCompleted(o)}goToApp(){this.router.navigate(["/data"])}onGoToOppositeForm(){this.router.navigate(["/signin"])}onGoToAboutPage(){this.router.navigate(["/about"])}convertDate(t){return new Date(t.getTime()-6e4*t.getTimezoneOffset()).toISOString().split("T")[0]+" 00:00:00"}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(Z.F0),e.Y36(w),e.Y36(Y.K),e.Y36(U.b))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-register"]],standalone:!0,features:[e.jDz],decls:2,vars:3,consts:[[3,"currentUser","onSignup","onGoToOppositeForm","onGoToAboutPage"]],template:function(t,o){1&t&&(e.TgZ(0,"app-register-view",0),e.NdJ("onSignup",function(p){return o.onSignup(p)})("onGoToOppositeForm",function(){return o.onGoToOppositeForm()})("onGoToAboutPage",function(){return o.onGoToAboutPage()}),e.ALo(1,"async"),e.qZA()),2&t&&e.Q6J("currentUser",e.lcZ(1,1,o.currentUser$))},dependencies:[u.ez,u.Ov,O]}),n})()}}]);